<html xmlns:f="http://typo3.org/ns/TYPO3/CMS/Fluid/ViewHelpers"
      data-namespace-typo3-fluid="true">

<f:layout name="Default" />

<f:section name="main">
    <f:if condition="{displayMode} == 'mini'">
        <f:then>
            <f:render partial="Cart/Mini" arguments="{cartItems: cartItems, itemCount: itemCount, cartPid: cartPid}" />
        </f:then>
        <f:else>
            <div class="tts-cart">

                <f:if condition="{cartItems}">
                    <f:then>
                        <div class="row">
                            <!-- Cart Items -->
                            <div class="col-lg-9 tts-cart__items">
                                <div class="table-responsive">
                                    <table class="table table-hover align-middle">
                                        <thead class="table-dark">
                                            <tr>
                                                <th scope="col" style="width: 80px;">Bild</th>
                                                <th scope="col">Produkt</th>
                                                <th scope="col" style="width: 100px;">Einzelpreis</th>
                                                <th scope="col" style="width: 120px;">Menge</th>
                                                <th scope="col" style="width: 100px;">Gesamt</th>
                                                <th scope="col" style="width: 50px;"></th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <f:for each="{cartItems}" as="item">
                                                <f:render partial="Cart/Item" arguments="{item: item}" />
                                            </f:for>
                                        </tbody>
                                    </table>
                                </div>
                            </div>

                            <!-- Cart Summary -->
                            <div class="col-lg-3 tts-cart__summary">
                                <div class="card border-0 shadow-sm">
                                    <div class="card-body">
                                        <h5 class="card-title mb-4">Zusammenfassung</h5>

                                        <div class="d-flex justify-content-between mb-2">
                                            <span>Netto:</span>
                                            <span>
                                                <f:format.currency currencySign="â‚¬" decimalSeparator="," thousandsSeparator=".">{totalNet}</f:format.currency>
                                            </span>
                                        </div>

                                        <div class="d-flex justify-content-between mb-2">
                                            <span>MwSt.:</span>
                                            <span>
                                                <f:format.currency currencySign="â‚¬" decimalSeparator="," thousandsSeparator=".">{totalTax}</f:format.currency>
                                            </span>
                                        </div>

                                        <div class="d-flex justify-content-between mb-3 pb-3 border-bottom">
                                            <span>Versandkosten:</span>
                                            <span class="text-muted">wird im Checkout berechnet</span>
                                        </div>

                                        <div class="d-flex justify-content-between mb-4">
                                            <strong>Zwischensumme (Brutto):</strong>
                                            <strong>
                                                <f:format.currency currencySign="â‚¬" decimalSeparator="," thousandsSeparator=".">{total}</f:format.currency>
                                            </strong>
                                        </div>

                                        <p class="small text-muted mb-4">Alle Preise zzgl. Versandkosten</p>

                                        <div class="d-grid gap-2">
                                            <f:link.page pageUid="{checkoutPid}" class="btn btn-primary btn-lg">
                                                Zur Kasse
                                            </f:link.page>

                                            <f:link.page pageUid="{continuePid}" class="btn btn-outline-secondary">
                                                Weiter einkaufen
                                            </f:link.page>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </f:then>
                    <f:else>
                        <div class="tts-empty-state text-center py-5">
                            <div class="mb-3" style="font-size: 64px;">ðŸ›’</div>
                            <h2 class="mb-3">Ihr Warenkorb ist leer</h2>
                            <p class="text-muted mb-4">FÃ¼gen Sie Produkte hinzu, um mit dem Einkauf zu beginnen.</p>
                            <f:link.page pageUid="{continuePid}" class="btn btn-primary btn-lg">
                                Jetzt einkaufen
                            </f:link.page>
                        </div>
                    </f:else>
                </f:if>
            </div>
        </f:else>
    </f:if>
</f:section>

</html>
